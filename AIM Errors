protected override async void OnNavigatedTo(NavigationEventArgs e)
{
    base.OnNavigatedTo(e);

    if (e.Parameter is PrintableForm form)
    {
        // DEBUG: Show what we received
        var debugInfo = $"Received PrintableForm:\n" +
                        $"- Header: {form.Header}\n" +
                        $"- Pages count: {form.Pages?. Count ??  0}\n" +
                        $"- PaginationLog count: {Services.PrintPaginationService.PaginationLog.Count}";
        
        if (form.Pages?. Count > 0)
        {
            var firstPage = form.Pages[0];
            debugInfo += $"\n\nFirst Page:\n" +
                         $"- Level2Header: {firstPage.Level2Header}\n" +
                         $"- Rows count: {firstPage.Rows?. Count ?? 0}";
            
            if (firstPage. Rows?.Count > 0)
            {
                debugInfo += $"\n- First 5 rows:";
                foreach (var row in firstPage. Rows. Take(5))
                {
                    debugInfo += $"\n  [{row.Type}] {row.Content?. Substring(0, Math.Min(30, row.Content?. Length ?? 0))}";
                }
            }
        }

        var dialog = new ContentDialog
        {
            Title = "DEBUG: Form Data Received",
            Content = new TextBlock 
            { 
                Text = debugInfo, 
                TextWrapping = TextWrapping. Wrap,
                IsTextSelectionEnabled = true
            },
            CloseButtonText = "OK",
            XamlRoot = this.XamlRoot
        };
        
        // Need to delay slightly for XamlRoot to be available
        DispatcherQueue.TryEnqueue(async () =>
        {
            await Task.Delay(100);
            await dialog.ShowAsync();
        });

        _viewModel?. LoadFormData(form);
    }

    RegisterForPrinting();
}
